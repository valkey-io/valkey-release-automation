#!/bin/sh
#
# Test that valkey-check-aof can validate an AOF file.

set -eu

TMPDIR=$(mktemp -d)
trap 'rm -rf "$TMPDIR"' EXIT

# Create a minimal valid AOF file
cat > "$TMPDIR/test.aof" <<'EOF'
*2
$6
SELECT
$1
0
*3
$3
SET
$3
foo
$3
bar
EOF

valkey-check-aof "$TMPDIR/test.aof"

echo "PASS: valkey-check-aof validated AOF successfully"
